<!DOCTYPE html>
<html lang="en">
<head>
<!--

Template 2082 Pure Mix

http://www.tooplate.com/view/2082-pure-mix

-->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="keywords" content="">
    <meta name="description" content="">

    <!-- Site title
   ================================================== -->
    <title>Edit</title>

    <!-- Bootstrap CSS
   ================================================== -->
    <link rel="stylesheet" href="css/bootstrap.min.css">

    <!-- Animate CSS
   ================================================== -->
    <link rel="stylesheet" href="css/animate.min.css">

    <!-- Font Icons CSS
   ================================================== -->
    <link rel="stylesheet" href="css/font-awesome.min.css">
    <link rel="stylesheet" href="css/ionicons.min.css">

    <!-- Main CSS
   ================================================== -->
    <link rel="stylesheet" href="css/style.css">

    <!-- Google web font 
   ================================================== -->   
  <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700,300' rel='stylesheet' type='text/css'>
    
</head>

<body>
    <!-- Preloader section
================================================== -->
<div class="preloader">

    <div class="sk-spinner sk-spinner-pulse"></div>

</div>

<!-- Navigation section
================================================== -->
<div class="nav-container">
   <nav class="nav-inner transparent">

      <div class="navbar">
         <div class="container">
            <div class="row">

              <div class="brand">
                <a href="index.html">Blossom Shop</a>
              </div>

              <div class="navicon">
                <div class="menu-container">

                  <div class="circle dark inline">
                    <i class="icon ion-navicon"></i>
                  </div>

                  <div class="list-menu">
                    <i class="icon ion-close-round close-iframe"></i>
                    <div class="intro-inner">
                        <ul id="nav-menu">
                          <li><a href="index.html">Home</a></li>
                        <li><a href="index.html">Log out</a></li>
                      </ul>
                    </div>
                  </div>

                </div>
              </div>

            </div>
         </div>
      </div>

   </nav>
</div>

<!-- Header section
================================================== -->
<section id="header" class="header-four">
    <div class="container">
        <div class="row">

            <div class="col-md-offset-3 col-md-6 col-sm-offset-2 col-sm-8">
                <div class="header-thumb">
                     <h1 class="wow fadeIn" data-wow-delay="0.6s">Hello</h1>
                     <h4><span class="username" data-wow-delay="1s"></h4></span>
                </div>
            </div>

        </div>
    </div>      
</section>

<section id="single-post">
<div class="container"> 
        <div class="blog-thumb">
               <div class="blog-comment-form">   
        <div id="pageintro" class="hoc clear">
            <h1>Edit Profile</h1><br>
            <form action="#" method="post">
                      <label for="username"><h4>Username</h4></label>
                      <input type="text" class="form-control" placeholder="" id="username" required>

                      <label for="fname"><h4>First Name</h4></label>
                      <input type="text" class="form-control" placeholder="" id="fname" required>

                      <label for="lname"><h4>Last name</h4></label>
                      <input type="text" class="form-control" placeholder="" id="lname" required>

                      <label for="email"><h4>E-Mail Address</h4></label>
                      <input type="email" class="form-control" placeholder="" id="email" required>

                      <label for="tel"><h4>Telephone</h4></label>
                      <input type="number" class="form-control" placeholder="" id="tel" required>

                <div class="contact-button back">
                        <input name="button" type="button" class="form-control" id="save" value="Save" aria-describedby="basic-addon1">
                        <input name="button" type="button" class="form-control" id="cancel" value="Cancel" aria-describedby="basic-addon1">
                </div>
            </form>
            </div>
            </div>
        </div>
    </div>
</div>
</section>

<!-- Footer section
================================================== -->
<footer>
    <div class="container">
        <div class="row">

            <div class="col-md-12 col-sm-12">
                <p class="wow fadeInUp"  data-wow-delay="0.3s">Copyright Â© 2016 Your Company Name - Designed by Tooplate</p>
                <ul class="social-icon wow fadeInUp"  data-wow-delay="0.6s">
                    <li><a href="https://www.facebook.com/nat.chilldaily" class="fa fa-facebook"></a></li>
                    <li><a href="https://twitter.com/BaBeDiLNic" class="fa fa-twitter"></a></li>
                    <li><a href="#" class="fa fa-dribbble"></a></li>
                    <li><a href="#" class="fa fa-behance"></a></li>
                    <li><a href="#" class="fa fa-google-plus"></a></li>
                </ul>
            </div>
            
        </div>
    </div>
</footer>

<!-- Javascript 
================================================== -->
<script src="js/jquery.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/isotope.js"></script>
<script src="js/imagesloaded.min.js"></script>
<script src="js/wow.min.js"></script>
<script src="js/custom.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.16.0/jquery.validate.min.js" charset="utf-8"></script>
    <script type="text/javascript">
        $.urlParam = function(name) {
            var results = new RegExp('[\?&]' + name + '=([^&#]*)').exec(window.location.href);
            return results[1] || 0;
        }
        $(function() {
            //Get user Id from querystring parameters
            var id = $.urlParam('id');
            //Create a Web Api url for getting a member info
            var url = "http://membershipwebapi977290.azurewebsites.net/api/Members/" + id;
            // console.log(url);
            $.get(url, function(data, status) {
                // console.log(data);
                //Set data to form elements
                $('.username').append(data.UserName);
                $('#username').val(data.UserName);
                // $('#password').val(data.Password);
                $('#fname').val(data.FirstName);
                $('#lname').val(data.LastName);
                $('#email').val(data.Email);
                $('#tel').val(data.Tel);
                //If user click cancel, go to userinfo page
                $("#cancel").click(function() {
                    window.location.href = "homesignin.html?id=" + data.Id;
                });
                //Save updated data
                $("#save").click(function() {
                    //Set update data to newuser object
                    var newuser = {};
                    newuser.Id = data.Id;
                    newuser.username = $("#username").val();
                    newuser.password = data.Password;
                    newuser.firstname = $("#fname").val();
                    newuser.lastname = $("#lname").val();
                    newuser.email = $("#email").val();
                    newuser.tel = $("#tel").val();
                    // console.log(JSON.stringify(newuser));
                    //Creat a url for update member data
                    var updateUrl = "http://membershipwebapi977290.azurewebsites.net/api/Members/" + data.Id;
                    //Call Web Api with method PUT for updating
                    $.ajax({
                        url: updateUrl,
                        type: 'PUT',
                        data: newuser,
                        success: function(result) {
                            alert('Updated Complete!');
                            window.location.href = "homesignin.html?id=" + data.Id;
                        }
                    });
                });
            });
        });
    </script>
</body>

</html>